<HTML>
<HEAD>
<TITLE>page</TITLE>
<META http-equiv=Content-Type content="text/html; charset=gb2312">

<link href="css/display_web.css" rel="stylesheet" type="text/css" />
<script language="javascript">if (window == top) top.location.href = "/index.html";
 </script>

<SCRIPT LANGUAGE="javascript">
function changebgcolor(){
 var tab = document.all.table1;
  var len = tab.rows.length ;
  for (var i=0; i<len; i++)
  {
	var lencol = tab.rows[i].cells.length
    for (var j=0; j<lencol; j++)
     {
        if (j % 2 == 1){

			tab.rows[i].cells[j].bgColor = "ffffff";
			tab.rows[i].cells[j].className = "all_tables" ;
		  }
	else{
			tab.rows[i].cells[j].bgColor = "D3E4F4";
			tab.rows[i].cells[j].className = "all_tables" ;
		}

     }

  }
}
function changebgcolor2(){
 var tab = document.all.table2;
  var len = tab.rows.length ;
  for (var i=0; i<len; i++)
  {
	var lencol = tab.rows[i].cells.length
    for (var j=0; j<lencol; j++)
     {
        if (j % 2 == 1){

			tab.rows[i].cells[j].bgColor = "ffffff";
			tab.rows[i].cells[j].className = "all_tables" ;
		  }
	else{
			tab.rows[i].cells[j].bgColor = "D3E4F4";
			tab.rows[i].cells[j].className = "all_tables" ;
		}

     }

  }
}
function changebgcolor3(){
 var tab = document.all.table3;
  var len = tab.rows.length ;
  for (var i=0; i<len; i++)
  {
	var lencol = tab.rows[i].cells.length
    for (var j=0; j<lencol; j++)
     {
        if (j % 2 == 1){

			tab.rows[i].cells[j].bgColor = "ffffff";
			tab.rows[i].cells[j].className = "all_tables" ;
		  }
	else{
			tab.rows[i].cells[j].bgColor = "D3E4F4";
			tab.rows[i].cells[j].className = "all_tables" ;
		}

     }

  }
}

  
function fucCheckNUM(NUM)
{
 var i,j,strTemp;
 strTemp="0123456789";
 if ( NUM.length== 0)
  return 0
 for (i=0;i<NUM.length;i++)
 {
  j=strTemp.indexOf(NUM.charAt(i)); 
  if (j==-1)
  {
  //说明有字符不是数字
   return false;
  }
 }
 //说明是数字
 return true;
} 


function display()
{
changebgcolor();
changebgcolor2();
changebgcolor3();
}
function checkMode()
{
		var PollInterval = document.getElementById("sntpSetPollInterval").value;
		
			if(!fucCheckNUM(PollInterval) || PollInterval < 30 || PollInterval > 99999 )
			{
				alert("轮询时间设置错误，正确时间是 30~99999s");
				return;
			}

	document.form1.submit();
}

function setTextLength()
{
if(document.getElementById("sntpSetDate2").value.length == 1)
	document.getElementById("sntpSetDate2").value = "0"+document.getElementById("sntpSetDate2").value;
if(document.getElementById("sntpSetDate3").value.length == 1)
	document.getElementById("sntpSetDate3").value = "0"+document.getElementById("sntpSetDate3").value;
	
	
if(document.getElementById("sntpSetTime1").value.length == 1)
	document.getElementById("sntpSetTime1").value = "0"+document.getElementById("sntpSetTime1").value;
if(document.getElementById("sntpSetTime2").value.length == 1)
	document.getElementById("sntpSetTime2").value = "0"+document.getElementById("sntpSetTime2").value;
if(document.getElementById("sntpSetTime3").value.length == 1)
	document.getElementById("sntpSetTime3").value = "0"+document.getElementById("sntpSetTime3").value;
}

function checkSub()
{
		var dataValue = document.getElementById("sntpSetDate1").value;
		if(isNaN(dataValue) || dataValue < 2000 || dataValue > 2099  || !fucCheckNUM(dataValue))
		{
			alert("年份设置错误");
			return;
		}
		dataValue = document.getElementById("sntpSetDate2").value;
		if(isNaN(dataValue) || dataValue < 1 || dataValue > 12   || !fucCheckNUM(dataValue))
		{
			alert("月份设置错误");
			return;
		}
		dataValue = document.getElementById("sntpSetDate3").value;
		if(isNaN(dataValue) || dataValue < 1 || dataValue > 31   || !fucCheckNUM(dataValue)) 
		{
			alert("日期设置错误");
			return;
		}	
		
		var dataValue_year =  document.getElementById("sntpSetDate1").value;
		var dataValue_month =  document.getElementById("sntpSetDate2").value ;
		var dataValue_day = document.getElementById("sntpSetDate3").value ;		
		
    switch (dataValue_month)
    {
    case "4":
    case "6":
    case "9":
    case "11":        	
        if(dataValue_day  > 30)
        {
          alert("日期设置错误");
          return;
        }
        break;
    case "2":
        if((dataValue_year%4 == 0 && dataValue_year%100 != 0) || dataValue_year%400 == 0)
        {
            if(dataValue_day > 29)
            {
                 alert("日期设置错误");
                  return;
            }
        }
        else
        {
            if(dataValue_day > 28)
            {
              alert("日期设置错误");
              return;
            }
        }        
        break;
    default:      
        break;
    }
		
		
		dataValue = document.getElementById("sntpSetTime1").value;
		if(isNaN(dataValue) || dataValue < 0 || dataValue > 23   || !fucCheckNUM(dataValue)) 
		{
			alert("小时设置错误");
			return;
		}
		
		dataValue = document.getElementById("sntpSetTime2").value;
		if(isNaN(dataValue) || dataValue < 0 || dataValue > 59   || !fucCheckNUM(dataValue)) 
		{
			alert("分设置错误");
			return;
		}		
		dataValue = document.getElementById("sntpSetTime3").value;
		if(isNaN(dataValue) || dataValue < 0 || dataValue > 59   || !fucCheckNUM(dataValue)) 
		{
			alert("秒设置错误");
			return;
		}
		
	document.form3.submit();
}

</script>

</HEAD>

<BODY  onload=display() >
<br>


<div id="view_help"  style="display:none">

<table width="98%" border="0" align="center" cellpadding="0" cellspacing="0" class="">
<tr>
    <td  class="Tablelist"><nobr>帮助</nobr></td>
    <td   class="tablenew"></td>
  </tr>
</table>
<TABLE width="98%" align="center" cellpadding=0 cellspacing=0   class="tablebord" bgcolor="D3E4F4">
	  
<SCRIPT language="javascript">
		document.writeln(top.leftframe.helptext('sntp'));
 </SCRIPT>
	  
	  </TABLE>
</div>


<form name="form1" method="post" >

<table width="98%" border="0" align="center" cellpadding="0" cellspacing="0" class="">
<tr>
    <td  class=Tablelist id=tabs name=tabs><nobr>SNTP服务器配置</nobr></td>  
  </tr>
</table>
<TABLE width="98%" align="center" cellpadding=0 cellspacing=0 id="table1" class="tablebord">
  <TBODY>
    <TR height=22>
      <TD width="27%" valign="top"><div align="left">&nbsp;&nbsp;<span class="td25">模式</span></div></TD>
      <TD width="73%" ><span class="crons">
      <input type="checkbox" name="sntpEnable" id="sntpEnable" value="ON" / $%sntpEnable#$>
启用</span></TD>
    </TR>
    <TR height=22>
      <TD valign="top">&nbsp;&nbsp;<span class="td25">首选服务器</span></TD>
      <TD ><span class="crons">
        <input type="text" name="sntpServer1" id="sntpServer1" maxlength=30 / VALUE="$%sntpServer1#$">
      </span></TD>
    </TR>
    <TR height=22>
      <TD valign="top">&nbsp;&nbsp;<span class="td25">备用服务器</span></TD>
      <TD ><span class="crons">
        <input type="text" name="sntpServer2" id="sntpServer2" maxlength=30 / VALUE="$%sntpServer2#$">
      </span></TD>
    </TR>
    <TR height=22>
      <TD valign="top">&nbsp;&nbsp;<span class="td25">轮询</span></TD>
      <TD ><span class="crons">
        <input type="text" name="sntpSetPollInterval" id="sntpSetPollInterval" / VALUE="$%sntpSetPollInterval#$" />
(30~99999s)</span></TD>
    </TR>
    <tr>
    <td   class="tablenew" colspan="8">&nbsp;
        <input name="sntpSetFlag" type="hidden" id="sntpSetFlag" value="1" />
        <input type="hidden" name="CheckBoxManager" value="sntpEnable">
<input name="b_submit2" class="button1" type="button" id="b_submit" value="提交"  onclick="checkMode()" >
        <input name="b_reset2" class="button1" type="button" onClick="javascript:window.location.reload() " id="b_reset2" value="取消">
    </td>
    </tr>
</TABLE>
</FORM>
<form name="form2" method="post" >

<table width="98%" border="0" align="center" cellpadding="0" cellspacing="0" class="">
<tr>
    <td width="60%"  class=Tablelist id=tabs name=tabs><nobr>时区配置</nobr></td>    
  </tr>
</table>
<TABLE width="98%" align="center" cellpadding=0 cellspacing=0 id="table2" class="tablebord">
  <TBODY>
    <TR height=22>
      <TD width="27%" valign="top"><div align="left">&nbsp;&nbsp;<span class="td25">时区</span></div></TD>
      <TD width="73%" ><span class="crons">
        <select name="sntp_time_difference">
          <option value="-12" $%sntp_time_difference(-12)#$>GMT-12</option>
          <option value="-11" $%sntp_time_difference(-11)#$>GMT-11</option>
          <option value="-10" $%sntp_time_difference(-10)#$>GMT-10</option>
          <option value="-9" $%sntp_time_difference(-9)#$>GMT-9</option>
          <option value="-8" $%sntp_time_difference(-8)#$>GMT-8</option>
          <option value="-7" $%sntp_time_difference(-7)#$>GMT-7</option>
          <option value="-6" $%sntp_time_difference(-6)#$>GMT-6</option>
          <option value="-5" $%sntp_time_difference(-5)#$>GMT-5</option>
          <option value="-4" $%sntp_time_difference(-4)#$>GMT-4</option>
          <option value="-3" $%sntp_time_difference(-3)#$>GMT-3</option>
          <option value="-2" $%sntp_time_difference(-2)#$>GMT-2</option>
          <option value="-1" $%sntp_time_difference(-1)#$>GMT-1</option>
          <option value="0" $%sntp_time_difference(0)#$>GMT</option>
          <option value="1" $%sntp_time_difference(1)#$>GMT+1</option>
          <option value="2" $%sntp_time_difference(2)#$>GMT+2</option>
          <option value="3" $%sntp_time_difference(3)#$>GMT+3</option>
          <option value="4" $%sntp_time_difference(4)#$>GMT+4</option>
          <option value="5" $%sntp_time_difference(5)#$>GMT+5</option>
          <option value="6" $%sntp_time_difference(6)#$>GMT+6</option>
          <option value="7" $%sntp_time_difference(7)#$>GMT+7</option>
          <option value="8" $%sntp_time_difference(8)#$>GMT+8</option>
          <option value="9" $%sntp_time_difference(9)#$>GMT+9</option>
          <option value="10" $%sntp_time_difference(10)#$>GMT+10</option>
          <option value="11" $%sntp_time_difference(11)#$>GMT+11</option>
          <option value="12" $%sntp_time_difference(12)#$>GMT+12</option>
        </select>
      </span></TD>
    </TR>
    <tr>
    <td class="partition" colspan="8">&nbsp;
        <input name="sntpSetFlag" type="hidden" id="sntpSetFlag" value="2" />
<input name="b_submit22" class="button1" type="submit" id="b_submit2" value="提交">
      <input name="b_reset22" class="button1" type="button" onClick="javascript:window.location.reload() " id="b_reset22" value="取消">
    </div></td>
    </tr>
</TABLE>
</form>
<form name="form3" method="post"  >

<table width="98%" border="0" align="center" cellpadding="0" cellspacing="0" class="">
<tr>
    <td  class=Tablelist id=tabs name=tabs>系统时间配置</td>
  </tr>
</table>
<TABLE width="98%" align="center" cellpadding=0 cellspacing=0 id="table3" class="tablebord">
  <TBODY>
    <TR height=22>
      <TD width="27%" valign="top"><div align="left">&nbsp;&nbsp;<span class="td25">设置当前日期</span></div></TD>
      <TD width="73%" ><span class="crons">
        <input name="sntpSetDate1" type="text" id="sntpSetDate1" size="4" maxlength="4" / VALUE="$%sntpSetDate1#$" />
年
<input name="sntpSetDate2" type="text" id="sntpSetDate2" size="2" maxlength="2" / VALUE="$%sntpSetDate2#$" />
月
<input name="sntpSetDate3" type="text" id="sntpSetDate3" size="2" maxlength="2" / VALUE="$%sntpSetDate3#$" />
日 </span></TD>
    </TR>
    <TR height=22>
      <TD valign="top">&nbsp;&nbsp;<span class="td25">设置当前时间</span></TD>
      <TD ><span class="crons">
        <input name="sntpSetTime1" type="text" id="sntpSetTime1" size="2" maxlength="2" / VALUE="$%sntpSetTime1#$" />
:
<input name="sntpSetTime2" type="text" id="sntpSetTime2" size="2" maxlength="2" / VALUE="$%sntpSetTime2#$" />
:
<input name="sntpSetTime3" type="text" id="sntpSetTime3" size="2" maxlength="2" / VALUE="$%sntpSetTime3#$" />
      </span></TD>
    </TR>
    <tr>
    	<td   class="partition" colspan="8">&nbsp;
        <input name="sntpSetFlag" type="hidden" id="sntpSetFlag" value="3" />
<input name="b_submit2" class="button1" type="button" id="b_submit" value="提交"  onclick="checkSub()">
        <input name="b_reset2" class="button1" type="button" onClick="javascript:window.location.reload() " id="b_reset2" value="取消">
    </div></td>
    </tr>
</TABLE>
    <script language="javascript">
	setTextLength();
	
	</script>

</FORM>

</BODY></HTML>
